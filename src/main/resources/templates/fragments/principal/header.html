<header th:fragment="header"
  class="border-bottom border-2 py-3 px-5 mt-4 d-flex justify-content-between align-items-center shadow-lg"
  style="background: linear-gradient(135deg, #4B0082 0%, #9370DB 100%); color: white; border-color: rgba(255,255,255,0.1) !important;">
  <!-- App Title -->
  <div class="d-flex align-items-center">
    <i class="bi bi-fire text-warning fs-3 me-2 animate-pulse"></i>
    <span class="fw-bold fs-4 text-white">Calories Control</span>
  </div>

  <nav class="d-flex align-items-center">
    <ul class="navbar-nav d-flex flex-column flex-lg-row align-items-center">
      <li class="nav-item me-3">
        <a class="nav-link text-white fw-semibold py-2 px-3 rounded d-flex align-items-center transition-all sidebar-link"
          th:href="@{/home}">
          <i class="bi bi-calculator me-2 fs-5"></i> Calculadora
        </a>
      </li>

      <li class="nav-item me-3">
        <a class="nav-link text-white fw-semibold py-2 px-3 rounded d-flex align-items-center transition-all sidebar-link"
          th:href="@{/imc/formRegister}">
          <i class="bi bi-clipboard-data me-2 fs-5"></i> Registrar IMC
        </a>
      </li>

      <li class="nav-item me-3">
        <a class="nav-link text-white fw-semibold py-2 px-3 rounded d-flex align-items-center transition-all sidebar-link"
          th:href="@{/rutina}">
          <i class="bi bi-activity me-2 fs-5"></i> Rutinas
        </a>
      </li>

      <li class="nav-item me-3">
        <a th:href="@{/about}"
          class="nav-link text-white fw-semibold py-2 px-3 rounded d-flex align-items-center transition-all hover-link">
          <i class="bi bi-info-circle me-2"></i>About
        </a>
      </li>

      <li class="nav-item me-4 d-flex align-items-center">
        <img th:src="${avatarUrl != null ? avatarUrl : 'https://randomuser.me/api/portraits/lego/0.jpg'}"
          class="rounded-circle border border-3 border-white me-2" width="45" height="45" alt="User Photo" />
        <span class="fw-bold text-white d-none d-lg-inline" th:text="${userName}"></span>
      </li>

      <!-- User Menu Dropdown -->
      <li class="nav-item dropdown">
        <button class="text-white fw-semibold dropdown-toggle" style="background: none; border: none; padding: 0;"
          type="button" id="userMenu" data-bs-toggle="dropdown" aria-expanded="false">
          Setting
        </button>
        <ul class="dropdown-menu" aria-labelledby="userMenu"
          style="background: rgba(255, 255, 255, 0.9); border: none; width: 200px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
          <li class="nav-item me-3">
            <a class="nav-link py-2 px-3 rounded d-flex align-items-center transition-all sidebar-link"
              th:href="@{/profile}">
              <i class="bi bi-person me-2 fs-5"></i> Perfil
            </a>
          </li>
          <li>
            <hr class="dropdown-divider" style="border-color: rgba(0,0,0,0.3); margin: 8px 0;">
          </li>
          <li>
            <form th:action="@{/logout}" method="post" class="m-0">
              <button type="submit" class="dropdown-item" style="background: none; border: none; padding: 12px 20px;">
                <i class="bi bi-box-arrow-right me-2"></i>Salir
              </button>
            </form>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

</header>